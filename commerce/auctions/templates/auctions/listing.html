{% extends "auctions/layout.html" %}

{% block body %}
    <h2>Current Listing</h2>
    <ul>
        <li>Listing id: {{ listing.id }}</li>
        <li>Creator id: {{ listing.user.username }}</li>
        <li>Title: {{ listing.title }}</li>
        <li>Description: {{ listing.description }}</li>
        <li><b>Current Bid ($): {{ listing.price }}</b></li>
        {% if listing.image.url != None %}
            <!-- remember to add ".url" to link to the image -->
            <li>Image: <img src="{{ listing.image.url }}" alt="Image" style="max-width: 200px;"></li>
        {% endif %}
        
    </ul>
    
    <form method="post" action="{% url 'watchlist' %}">
        {% csrf_token %}
        <!-- <input type="hidden" name="page_url" value="{{ request.build_absolute_uri }}"> -->
        <input type="hidden" name="listing_id" value="{{ listing.id }}">
        <button type="submit" name="add_button">Add to watchlist</button>
    </form>

    <div> 
        <form method="post" action="{% url 'bid' %}">
            {% csrf_token %}
            <label for="bid">Your Bid:</label><br>   
            <input type="number" id="bid_price" name="bid_price" placeholder="input your bid">
            <input type="hidden" name="listing_id" value="{{ listing.id }}">
            <button type="submit" name="bid_price_submit">Bid now</button>
        </form>
    </div>
{% endblock %}